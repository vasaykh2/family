// vite.config.js
import { defineConfig } from "file:///D:/makeroi/linked-fields/node_modules/vite/dist/node/index.js";
import { viteStaticCopy } from "file:///D:/makeroi/linked-fields/node_modules/vite-plugin-static-copy/dist/index.js";
import zipPack from "file:///D:/makeroi/linked-fields/node_modules/vite-plugin-zip-pack/dist/esm/index.mjs";
import { fileURLToPath, URL } from "node:url";

// vite.entry-point.js
import pc from "file:///D:/makeroi/linked-fields/node_modules/picocolors/picocolors.js";
import fs from "fs";
import fg from "file:///D:/makeroi/linked-fields/node_modules/fast-glob/out/index.js";
var log = (msg) => console.error(`${pc.cyan("[entry-point]")} ${pc.green(msg)}`);
var getFileContent = function(file, silence = false) {
  try {
    return fs.readFileSync(`./${file}`);
  } catch (e) {
    if (!silence)
      throw new Error("\u041D\u0435 \u0441\u043C\u043E\u0433\u043B\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0444\u0430\u0439\u043B: " + file);
  }
};
var writeFileContent = function(file, replaced, silence = false) {
  try {
    fs.writeFileSync(`./${file}`, replaced ?? "", {});
  } catch (e) {
    if (!silence)
      throw new Error("\u041D\u0435 \u0441\u043C\u043E\u0433\u043B\u0438 \u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0444\u0430\u0439\u043B: " + file);
  }
};
var entryPoint = ({ pattern = "", mode = "local", prefix = true }) => ({
  name: "replace-entry-point",
  closeBundle: () => {
    var _a;
    let files;
    if (pattern.includes("*"))
      files = fg.sync([`dist/${pattern}`]);
    else
      files = [`dist/${pattern}`];
    for (const file of files) {
      let replaced = (_a = getFileContent(file, mode === "local")) == null ? void 0 : _a.toString();
      replaced = replaced.replace(/([^:])\/\/.*?((\n)|(\r)|(\n\r)|(\r\n))/ig, "$1").replace(/(\/\*.*?\*\/)/g, "");
      replaced = replaced.replace(/\{build_date}/g, (/* @__PURE__ */ new Date()).toString()).replace(/\{build_timestamp}/g, Date.now().toString());
      replaced = replaced.replace(/console\.(warn|log|error|info)/g, "console.debug");
      if (!replaced.startsWith("define")) {
        replaced = replaced.replace(/([\w\W]*?)(\s*?)(define\(\[.*\],[\s]*function\(.*?\)\s*?\{)/, "$3$2$1");
      }
      log(`\u0414\u043E\u0431\u0430\u0432\u0438\u043B\u0438 \u0442\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u0438 \u043E\u0447\u0438\u0441\u0442\u0438\u043B\u0438 \u0444\u0430\u0439\u043B: ${file}`);
      writeFileContent(file, (prefix ? `/**
*
*   For all questions on development or support, you can contact our technical department
*   Build date: ${(/* @__PURE__ */ new Date()).toString()}. Mode: ${mode}
*
*/
` : "") + replaced, mode === "local");
    }
  }
});

// vite.config.js
import vue from "file:///D:/makeroi/linked-fields/node_modules/@vitejs/plugin-vue/dist/index.mjs";
var __vite_injected_original_import_meta_url = "file:///D:/makeroi/linked-fields/vite.config.js";
var vite_config_default = defineConfig(({ mode }) => {
  const isProduction = mode === "production";
  return {
    build: {
      sourcemap: !isProduction,
      minify: isProduction,
      target: "es2015",
      lib: {
        entry: "src/App.ts",
        fileName: (format, entryName) => "scripts/" + entryName + ".js",
        name: "amo-widget",
        formats: ["amd"]
        // iife
      },
      rollupOptions: {
        // make sure to externalize deps that shouldn't be bundled
        // into your library
        external: [
          "$",
          "_",
          "jquery",
          "backbone",
          "underscore",
          "clipboard",
          "twigjs",
          "moment",
          "lib/components/base/modal",
          "intl-tel-input",
          "intl-tel-input-utils"
        ],
        output: {
          externalLiveBindings: false,
          extend: true,
          freeze: false,
          globals: {
            // eslint-disable-next-line @typescript-eslint/naming-convention
            "lib/components/base/modal": "Modal",
            "moment": "moment"
          },
          amd: {
            forceJsExtensionForImports: true
          }
        },
        watch: {
          include: [
            "./vite.config.js",
            "./resources/script.js",
            "./resources/**/*"
          ],
          patterns: [
            "src",
            "resources"
          ],
          extensions: "ts,json,sass,js,twig"
        }
      }
    },
    css: {
      modules: {
        localsConvention: "camelCase"
      }
    },
    plugins: [
      vue(),
      viteStaticCopy({
        targets: [
          {
            src: [
              "resources/images/",
              "resources/i18n/",
              "resources/templates/"
            ],
            dest: ""
          },
          {
            src: "resources/external/*.js",
            dest: "external"
          },
          {
            src: `resources/manifest.json`,
            dest: "",
            rename: "manifest.json"
          },
          {
            src: `resources/script.js`,
            dest: "",
            rename: "script.js"
          }
        ]
      }),
      entryPoint({ pattern: "scripts/*.js", mode }),
      zipPack({
        outFileName: "widget.zip",
        outDir: "dist"
      })
    ],
    resolve: {
      alias: {
        vue: "vue/dist/vue.esm-bundler.js",
        "@": fileURLToPath(new URL("./src", __vite_injected_original_import_meta_url)),
        "@assets": fileURLToPath(new URL("./resources", __vite_injected_original_import_meta_url))
      }
    },
    define: {
      "process.env": {
        NODE_ENV: mode
      }
    }
  };
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcuanMiLCAidml0ZS5lbnRyeS1wb2ludC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkQ6XFxcXG1ha2Vyb2lcXFxcbGlua2VkLWZpZWxkc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcbWFrZXJvaVxcXFxsaW5rZWQtZmllbGRzXFxcXHZpdGUuY29uZmlnLmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9EOi9tYWtlcm9pL2xpbmtlZC1maWVsZHMvdml0ZS5jb25maWcuanNcIjsvLyB2aXRlLmNvbmZpZy5qc1xuaW1wb3J0IHtkZWZpbmVDb25maWd9IGZyb20gJ3ZpdGUnO1xuaW1wb3J0IHt2aXRlU3RhdGljQ29weX0gZnJvbSAndml0ZS1wbHVnaW4tc3RhdGljLWNvcHknO1xuaW1wb3J0IHppcFBhY2sgZnJvbSAndml0ZS1wbHVnaW4temlwLXBhY2snO1xuaW1wb3J0IHtmaWxlVVJMVG9QYXRoLCBVUkx9IGZyb20gXCJub2RlOnVybFwiO1xuaW1wb3J0IGVudHJ5UG9pbnQgZnJvbSBcIi4vdml0ZS5lbnRyeS1wb2ludC5qc1wiO1xuaW1wb3J0IHZ1ZSBmcm9tICdAdml0ZWpzL3BsdWdpbi12dWUnO1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKCh7bW9kZX0pID0+IHtcbiAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBtb2RlID09PSAncHJvZHVjdGlvbic7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgc291cmNlbWFwOiAhaXNQcm9kdWN0aW9uLFxuICAgICAgICAgICAgbWluaWZ5OiBpc1Byb2R1Y3Rpb24sXG4gICAgICAgICAgICB0YXJnZXQ6ICdlczIwMTUnLFxuICAgICAgICAgICAgbGliOiB7XG4gICAgICAgICAgICAgICAgZW50cnk6ICdzcmMvQXBwLnRzJyxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogKGZvcm1hdCwgZW50cnlOYW1lKSA9PiAnc2NyaXB0cy8nICsgZW50cnlOYW1lICsgJy5qcycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2Ftby13aWRnZXQnLFxuICAgICAgICAgICAgICAgIGZvcm1hdHM6IFsnYW1kJ10sIC8vIGlpZmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByb2xsdXBPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGV4dGVybmFsaXplIGRlcHMgdGhhdCBzaG91bGRuJ3QgYmUgYnVuZGxlZFxuICAgICAgICAgICAgICAgIC8vIGludG8geW91ciBsaWJyYXJ5XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWw6IFtcbiAgICAgICAgICAgICAgICAgICAgJyQnLFxuICAgICAgICAgICAgICAgICAgICAnXycsXG4gICAgICAgICAgICAgICAgICAgICdqcXVlcnknLFxuICAgICAgICAgICAgICAgICAgICAnYmFja2JvbmUnLFxuICAgICAgICAgICAgICAgICAgICAndW5kZXJzY29yZScsXG4gICAgICAgICAgICAgICAgICAgICdjbGlwYm9hcmQnLFxuICAgICAgICAgICAgICAgICAgICAndHdpZ2pzJyxcbiAgICAgICAgICAgICAgICAgICAgJ21vbWVudCcsXG4gICAgICAgICAgICAgICAgICAgICdsaWIvY29tcG9uZW50cy9iYXNlL21vZGFsJyxcbiAgICAgICAgICAgICAgICAgICAgJ2ludGwtdGVsLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2ludGwtdGVsLWlucHV0LXV0aWxzJ1xuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsTGl2ZUJpbmRpbmdzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmcmVlemU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGliL2NvbXBvbmVudHMvYmFzZS9tb2RhbCc6ICdNb2RhbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbW9tZW50JzogJ21vbWVudCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFtZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VKc0V4dGVuc2lvbkZvckltcG9ydHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdhdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICcuL3ZpdGUuY29uZmlnLmpzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcuL3Jlc291cmNlcy9zY3JpcHQuanMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJy4vcmVzb3VyY2VzLyoqLyonXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3JjJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXNvdXJjZXMnXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6ICd0cyxqc29uLHNhc3MsanMsdHdpZycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNzczoge1xuICAgICAgICAgICAgbW9kdWxlczoge1xuICAgICAgICAgICAgICAgIGxvY2Fsc0NvbnZlbnRpb246ICdjYW1lbENhc2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwbHVnaW5zOiBbXG4gICAgICAgICAgICB2dWUoKSxcbiAgICAgICAgICAgIHZpdGVTdGF0aWNDb3B5KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXNvdXJjZXMvaW1hZ2VzLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc291cmNlcy9pMThuLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc291cmNlcy90ZW1wbGF0ZXMvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0OiAnJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM6ICdyZXNvdXJjZXMvZXh0ZXJuYWwvKi5qcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0OiAnZXh0ZXJuYWwnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogYHJlc291cmNlcy9tYW5pZmVzdC5qc29uYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3Q6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuYW1lOiAnbWFuaWZlc3QuanNvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBgcmVzb3VyY2VzL3NjcmlwdC5qc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmFtZTogJ3NjcmlwdC5qcydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGVudHJ5UG9pbnQoe3BhdHRlcm46ICdzY3JpcHRzLyouanMnLCBtb2RlOiBtb2RlfSksXG4gICAgICAgICAgICB6aXBQYWNrKHtcbiAgICAgICAgICAgICAgICBvdXRGaWxlTmFtZTogJ3dpZGdldC56aXAnLFxuICAgICAgICAgICAgICAgIG91dERpcjogJ2Rpc3QnLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGFsaWFzOiB7XG4gICAgICAgICAgICAgICAgdnVlOiAndnVlL2Rpc3QvdnVlLmVzbS1idW5kbGVyLmpzJyxcbiAgICAgICAgICAgICAgICAnQCc6IGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi9zcmMnLCBpbXBvcnQubWV0YS51cmwpKSxcbiAgICAgICAgICAgICAgICAnQGFzc2V0cyc6IGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi9yZXNvdXJjZXMnLCBpbXBvcnQubWV0YS51cmwpKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZGVmaW5lOiB7XG4gICAgICAgICAgICAncHJvY2Vzcy5lbnYnOiB7XG4gICAgICAgICAgICAgICAgTk9ERV9FTlY6IG1vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRDpcXFxcbWFrZXJvaVxcXFxsaW5rZWQtZmllbGRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJEOlxcXFxtYWtlcm9pXFxcXGxpbmtlZC1maWVsZHNcXFxcdml0ZS5lbnRyeS1wb2ludC5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRDovbWFrZXJvaS9saW5rZWQtZmllbGRzL3ZpdGUuZW50cnktcG9pbnQuanNcIjtpbXBvcnQgcGMgZnJvbSAncGljb2NvbG9ycyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IGZnIGZyb20gXCJmYXN0LWdsb2JcIjtcblxuY29uc3QgbG9nID0gKG1zZykgPT4gY29uc29sZS5lcnJvcihgJHtwYy5jeWFuKCdbZW50cnktcG9pbnRdJyl9ICR7cGMuZ3JlZW4obXNnKX1gKTtcbmNvbnN0IGdldEZpbGVDb250ZW50ID0gZnVuY3Rpb24gKGZpbGUsIHNpbGVuY2UgPSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoYC4vJHtmaWxlfWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCFzaWxlbmNlKSB0aHJvdyBuZXcgRXJyb3IoJ1x1MDQxRFx1MDQzNSBcdTA0NDFcdTA0M0NcdTA0M0VcdTA0MzNcdTA0M0JcdTA0MzggXHUwNDNFXHUwNDQyXHUwNDNBXHUwNDQwXHUwNDRCXHUwNDQyXHUwNDRDIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQjogJyArIGZpbGUpO1xuICAgIH1cbn07XG5jb25zdCB3cml0ZUZpbGVDb250ZW50ID0gZnVuY3Rpb24gKGZpbGUsIHJlcGxhY2VkLCBzaWxlbmNlID0gZmFsc2UpIHtcbiAgICB0cnkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGAuLyR7ZmlsZX1gLCAocmVwbGFjZWQgPz8gJycpLCB7fSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoIXNpbGVuY2UpIHRocm93IG5ldyBFcnJvcignXHUwNDFEXHUwNDM1IFx1MDQ0MVx1MDQzQ1x1MDQzRVx1MDQzM1x1MDQzQlx1MDQzOCBcdTA0MzdcdTA0MzBcdTA0M0ZcdTA0MzhcdTA0NDFcdTA0MzBcdTA0NDJcdTA0NEMgXHUwNDQ0XHUwNDMwXHUwNDM5XHUwNDNCOiAnICsgZmlsZSk7XG4gICAgfVxufVxuXG5jb25zdCBlbnRyeVBvaW50ID0gKHtwYXR0ZXJuID0gJycsIG1vZGUgPSAnbG9jYWwnLCBwcmVmaXggPSB0cnVlfSkgPT4gKHtcbiAgICBuYW1lOiAncmVwbGFjZS1lbnRyeS1wb2ludCcsXG4gICAgY2xvc2VCdW5kbGU6ICgpID0+IHtcbiAgICAgICAgbGV0IGZpbGVzO1xuICAgICAgICBpZiAocGF0dGVybi5pbmNsdWRlcygnKicpKSBmaWxlcyA9IGZnLnN5bmMoW2BkaXN0LyR7cGF0dGVybn1gXSk7XG4gICAgICAgIGVsc2UgZmlsZXMgPSBbYGRpc3QvJHtwYXR0ZXJufWBdXG5cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSAoZ2V0RmlsZUNvbnRlbnQoZmlsZSwgbW9kZSA9PT0gJ2xvY2FsJyk/LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICAgIC8vIFx1MDQyM1x1MDQzNFx1MDQzMFx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0M0FcdTA0M0VcdTA0M0NcdTA0M0NcdTA0MzVcdTA0M0RcdTA0NDJcdTA0MzBcdTA0NDBcdTA0MzhcdTA0MzVcdTA0MzJcbiAgICAgICAgICAgIHJlcGxhY2VkID0gcmVwbGFjZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFteOl0pXFwvXFwvLio/KChcXG4pfChcXHIpfChcXG5cXHIpfChcXHJcXG4pKS9pZywgJyQxJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFxcL1xcKi4qP1xcKlxcLykvZywgJycpO1xuXG4gICAgICAgICAgICAvLyBcdTA0MTRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUgXHUwNDM0XHUwNDMwXHUwNDQyIFx1MDQ0MVx1MDQzMVx1MDQzRVx1MDQ0MFx1MDQzQVx1MDQzOFxuICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHtidWlsZF9kYXRlfS9nLCAobmV3IERhdGUoKSkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFx7YnVpbGRfdGltZXN0YW1wfS9nLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICAgIHJlcGxhY2VkID0gcmVwbGFjZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvY29uc29sZVxcLih3YXJufGxvZ3xlcnJvcnxpbmZvKS9nLCAnY29uc29sZS5kZWJ1ZycpO1xuXG4gICAgICAgICAgICBpZiAoIXJlcGxhY2VkLnN0YXJ0c1dpdGgoJ2RlZmluZScpKSB7XG4gICAgICAgICAgICAgICAgLy9yZXBsYWNlZCA9IHJlcGxhY2VkLnJlcGxhY2UoLyhbXFx3XFxXXSo/KShcXHMqPykoZGVmaW5lXFwoXFxbLipdLGZ1bmN0aW9uXFwoLio/XFwpXFxzKj9cXHspLywgXCIkMyQyJDFcIik7XG4gICAgICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlZC5yZXBsYWNlKC8oW1xcd1xcV10qPykoXFxzKj8pKGRlZmluZVxcKFxcWy4qXFxdLFtcXHNdKmZ1bmN0aW9uXFwoLio/XFwpXFxzKj9cXHspLywgXCIkMyQyJDFcIik7XG4gICAgICAgICAgICAgICAgLy9yZXBsYWNlZCA9IHJlcGxhY2VkLnJlcGxhY2UoLyhbXFx3XFxXXSopKFtcXHNdKikoZGVmaW5lXFwoXFxbLipcXF0sW1xcc10qZnVuY3Rpb25cXCguKlxcKVtcXHNdKlxceykvLCBcIiQzJDIkMVwiKTtcbiAgICAgICAgICAgICAgICAvL3JlcGxhY2VkID0gcmVwbGFjZWQucmVwbGFjZSgvKFtcXHdcXFddKikoW1xcc10qKShkZWZpbmVcXChcXFsuKlxcXSxbXFxzXSpmdW5jdGlvblxcKC4qXFwpW1xcc10qXFx7W1xcc10qKS8sIFwiJDMkMiQxXCIpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZyhyZXBsYWNlZC5tYXRjaCgvKFtcXHdcXFddKikoW1xcc10qKShkZWZpbmVcXChcXFsuKlxcXSxbXFxzXSpmdW5jdGlvblxcKC4qXFwpW1xcc10qXFx7KS8pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nKGBcdTA0MTRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0MzhcdTA0M0JcdTA0MzggXHUwNDQyXHUwNDM1XHUwNDQ1XHUwNDNEXHUwNDM4XHUwNDQ3XHUwNDM1XHUwNDQxXHUwNDNBXHUwNDQzXHUwNDRFIFx1MDQzOFx1MDQzRFx1MDQ0NFx1MDQzRVx1MDQ0MFx1MDQzQ1x1MDQzMFx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzggXHUwNDNFXHUwNDQ3XHUwNDM4XHUwNDQxXHUwNDQyXHUwNDM4XHUwNDNCXHUwNDM4IFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQjogJHtmaWxlfWApO1xuICAgICAgICAgICAgd3JpdGVGaWxlQ29udGVudChmaWxlLCAocHJlZml4ID8gYC8qKlxuKlxuKiAgIEZvciBhbGwgcXVlc3Rpb25zIG9uIGRldmVsb3BtZW50IG9yIHN1cHBvcnQsIHlvdSBjYW4gY29udGFjdCBvdXIgdGVjaG5pY2FsIGRlcGFydG1lbnRcbiogICBCdWlsZCBkYXRlOiAkeyhuZXcgRGF0ZSgpKS50b1N0cmluZygpfS4gTW9kZTogJHttb2RlfVxuKlxuKi9cbmAgOiAnJykgKyByZXBsYWNlZCwgbW9kZSA9PT0gJ2xvY2FsJyk7XG4gICAgICAgIH1cbiAgICB9LFxufSk7XG5cbmV4cG9ydCB7ZW50cnlQb2ludCBhcyBkZWZhdWx0fTsiXSwKICAibWFwcGluZ3MiOiAiO0FBQ0EsU0FBUSxvQkFBbUI7QUFDM0IsU0FBUSxzQkFBcUI7QUFDN0IsT0FBTyxhQUFhO0FBQ3BCLFNBQVEsZUFBZSxXQUFVOzs7QUNKeU8sT0FBTyxRQUFRO0FBQ3pSLE9BQU8sUUFBUTtBQUNmLE9BQU8sUUFBUTtBQUVmLElBQU0sTUFBTSxDQUFDLFFBQVEsUUFBUSxNQUFNLEdBQUcsR0FBRyxLQUFLLGVBQWUs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
